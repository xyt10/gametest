# 战机选择系统 - 完整指南

## 🎮 功能概述

战机选择系统允许玩家在开始游戏前选择自己喜欢的战机类型。每种战机都有独特的属性、武器和外观。

---

## 🌟 游戏流程

### 新的游戏流程

```
主菜单 → 战机选择 → 游戏开始
```

1. **主菜单**: 点击屏幕进入战机选择
2. **战机选择**: 浏览并选择战机，点击确认
3. **游戏开始**: 使用选择的战机进入战斗

---

## 🖥️ 界面说明

### 战机选择界面布局

```
┌─────────────────────────────────────┐
│         选择你的战机                │
│   每种战机都有独特的属性和武器        │
├─────────────────────────────────────┤
│                                     │
│   [标准] [突击] [坦克] [拦截] [猎杀] │
│    卡片   卡片   卡片   卡片   卡片   │
│                                     │
├─────────────────────────────────────┤
│                                     │
│   战机详细信息面板                   │
│   - 名称和描述                       │
│   - 详细属性                         │
│   - 武器类型                         │
│                                     │
├─────────────────────────────────────┤
│          [确认选择]                  │
└─────────────────────────────────────┘
```

---

## 🎴 战机卡片

### 卡片元素

每个战机卡片包含：

1. **战机图标**: 简化的战机预览（带配色）
2. **战机名称**: 战机类型名称
3. **属性条**: 4个关键属性的可视化
   - 🔴 **火力**: 伤害输出能力
   - 🟢 **血量**: 生存能力
   - 🟠 **速度**: 移动速度
   - 🔵 **射速**: 攻击频率

### 卡片状态

- **正常**: 灰色半透明背景，灰色边框
- **悬停**: 白色边框，轻微上浮
- **选中**: 青色边框，动画浮动，底部显示✓

---

## 📊 详细信息面板

点击战机卡片后，底部面板显示：

### 显示内容

1. **战机名称**: 大号加粗字体
2. **描述**: 战机特点简介
3. **详细属性**:
   - 生命值
   - 速度
   - 射速（毫秒）
   - 伤害倍率
4. **武器类型**: 专属子弹类型

### 示例

```
突击型
高火力高射速

生命值: 80        速度: 4
射速: 120ms      伤害倍率: 1.5x

武器: 激光
```

---

## 🎯 五种可选战机

### 1. 标准型 (STANDARD)
**外观**: 蓝色
**描述**: 平衡的攻击与防御
**属性**:
- 生命值: 100 ████████
- 速度: 5 ████████
- 射速: 200ms ████████
- 火力: 1.0x ████████

**武器**: 普通弹
**适合**: 新手玩家，稳扎稳打

---

### 2. 突击型 (ASSAULT)
**外观**: 红色
**描述**: 高火力高射速
**属性**:
- 生命值: 80 ██████
- 速度: 4 ██████
- 射速: 120ms ████████████
- 火力: 1.5x ████████████

**武器**: 激光（穿透3个敌人）
**适合**: 进攻型玩家，高DPS

---

### 3. 重型坦克 (TANK)
**外观**: 绿色
**描述**: 超高血量低速度
**属性**:
- 生命值: 200 ████████████████
- 速度: 3 ████
- 射速: 300ms ████
- 火力: 1.2x ██████████

**武器**: 等离子炮（无限穿透）
**适合**: 防御型玩家，正面硬刚

---

### 4. 拦截机 (INTERCEPTOR)
**外观**: 橙色
**描述**: 极速移动散弹攻击
**属性**:
- 生命值: 60 ████
- 速度: 8 ████████████████
- 射速: 250ms ██████
- 火力: 0.8x ██████

**武器**: 散弹（一次5发）
**适合**: 技术型玩家，高机动

---

### 5. 猎杀者 (HUNTER)
**外观**: 紫色
**描述**: 追踪导弹专精
**属性**:
- 生命值: 90 ██████
- 速度: 5 ████████
- 射速: 400ms ████
- 火力: 1.3x ██████████

**武器**: 追踪导弹（自动锁定）
**适合**: 休闲型玩家，轻松击杀

---

## 🖱️ 操作方式

### 鼠标操作

1. **选择战机**: 点击战机卡片
2. **查看详情**: 卡片被选中，底部显示详情
3. **确认选择**: 点击绿色"确认选择"按钮
4. **进入游戏**: 使用选择的战机开始游戏

### 触屏操作

与鼠标操作相同，触摸即可

### 悬停效果

- 鼠标移到卡片上：卡片上浮，边框变白
- 鼠标移到按钮上：按钮变亮，发光效果

---

## 🎨 视觉设计

### 配色方案

```javascript
背景渐变:
- 顶部: #001133 (深蓝)
- 中部: #001a4d (中蓝)
- 底部: #002266 (蓝)

卡片:
- 正常: 灰色半透明
- 选中: 青色渐变
- 边框: #00ffff (选中) / #666666 (正常)

按钮:
- 正常: 绿色渐变 #00aa00 → #006600
- 悬停: 亮绿渐变 #00dd00 → #008800
- 发光: #00ff00
```

### 动画效果

1. **选中动画**:
   - 上下浮动（正弦波）
   - 周期: 约0.33秒

2. **悬停动画**:
   - 上浮5像素
   - 边框变白

3. **按钮动画**:
   - 悬停发光
   - 颜色变化

---

## 💻 技术实现

### 文件结构

```
src/ui/ShipSelection.js    // 战机选择界面类
src/scenes/GameScene.js    // 游戏场景（集成）
src/config/GameConfig.js   // 战机配置数据
```

### 核心方法

**ShipSelection.js**:
```javascript
constructor(ctx, canvas)     // 初始化
setupEvents()                // 绑定事件
removeEvents()               // 移除事件
update(deltaTime)            // 更新动画
render()                     // 渲染界面
getSelectedShip()            // 获取选择
```

**GameScene.js**:
```javascript
showShipSelection()          // 显示选择界面
startGame()                  // 开始游戏（使用选择）
```

### 事件流

```javascript
// 1. 主菜单点击
gameState = 'menu' → 点击 → showShipSelection()

// 2. 战机选择
gameState = 'shipSelection' → 点击卡片 → 选中战机

// 3. 确认选择
点击确认 → onConfirm() → startGame()

// 4. 开始游戏
gameState = 'playing' → player.reset(shipType)
```

---

## 🔧 自定义配置

### 修改卡片布局

在 `ShipSelection.js` 中：

```javascript
// 卡片尺寸
this.cardWidth = 85;
this.cardHeight = 140;
this.cardSpacing = 10;

// 起始位置（自动居中）
this.startX = (GameConfig.CANVAS_WIDTH -
              (this.cardWidth * 5 + this.cardSpacing * 4)) / 2;
this.startY = 200;
```

### 修改按钮

```javascript
this.confirmButton = {
    x: GameConfig.CANVAS_WIDTH / 2 - 80,
    y: 550,
    width: 160,
    height: 50,
    text: '确认选择'
};
```

---

## 🐛 调试

### 查看当前状态

```javascript
// 控制台查看游戏状态
console.log('游戏状态:', gameScene.gameState);

// 查看选择的战机
console.log('选择的战机:', gameScene.selectedShipType);

// 查看当前玩家战机
console.log('玩家战机:', gameScene.player.shipType);
```

### 强制选择战机

```javascript
// 跳过选择界面，直接设置战机
gameScene.selectedShipType = 'ASSAULT';
gameScene.startGame();
```

### 返回选择界面

```javascript
// 从游戏中返回
gameScene.showShipSelection();
```

---

## ✨ 特色功能

### 1. **实时预览**
- 点击卡片即可查看详细信息
- 属性条直观显示战机特点

### 2. **响应式设计**
- 支持鼠标和触屏操作
- 悬停和选中状态清晰

### 3. **平滑动画**
- 选中战机有浮动动画
- 按钮有发光效果

### 4. **信息丰富**
- 详细的属性数据
- 战机描述和武器说明

---

## 📱 响应式布局

界面自适应画布尺寸（480x800）：
- 标题居中
- 卡片自动居中排列
- 按钮居中对齐
- 所有元素相对定位

---

## 🎊 使用示例

### 完整游戏流程

```
1. 启动游戏
   ↓
2. 显示主菜单
   "点击屏幕开始"
   ↓
3. 点击屏幕
   ↓
4. 进入战机选择界面
   - 显示5种战机卡片
   - 默认选中"标准型"
   ↓
5. 点击不同战机卡片
   - 查看详细信息
   - 对比属性
   ↓
6. 点击"确认选择"
   ↓
7. 进入游戏
   - 使用选择的战机
   - 开始战斗
```

---

## 🔑 关键代码

### 初始化战机选择

```javascript
// GameScene.js - init()
this.shipSelection = new ShipSelection(this.ctx, this.canvas);
this.shipSelection.onConfirm = () => {
    this.selectedShipType = this.shipSelection.getSelectedShip();
    this.startGame();
};
```

### 使用选择的战机

```javascript
// GameScene.js - startGame()
const shipType = this.selectedShipType || 'STANDARD';
this.player.reset(shipType);
```

---

## 🎯 最佳实践

1. **选择前了解**: 仔细查看每种战机的属性
2. **根据玩法选择**:
   - 新手 → 标准型
   - 喜欢进攻 → 突击型
   - 喜欢防守 → 坦克型
   - 技术流 → 拦截机
   - 休闲玩家 → 猎杀者
3. **尝试不同战机**: 体验各种玩法

---

战机选择系统让游戏更具策略性和可玩性，享受不同战机带来的独特体验！
